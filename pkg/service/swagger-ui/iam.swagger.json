{
  "swagger": "2.0",
  "info": {
    "title": "iam.proto",
    "version": "version not set"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1.1/actions": {
      "get": {
        "operationId": "DescribeActions",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDescribeActionsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/groups": {
      "get": {
        "operationId": "DescribeGroups",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDescribeGroupsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "head.user_id",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "search_word",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "delete": {
        "operationId": "DeleteGroups",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDeleteGroupsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamDeleteGroupsRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "post": {
        "operationId": "CreateGroup",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamCreateGroupResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamCreateGroupRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "patch": {
        "operationId": "ModifyGroup",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamModifyGroupResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamModifyGroupRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/groups/{group_id}": {
      "get": {
        "operationId": "GetGroup",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamGetGroupResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "head.user_id",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/password:change": {
      "post": {
        "operationId": "ModifyPassword",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamBool"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamUserPassword"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/password:compare": {
      "post": {
        "operationId": "ComparePassword",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamBool"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamUserPassword"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/role_module_bindings": {
      "post": {
        "operationId": "ModifyRoleModuleBindings",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamModifyRoleModuleBindingsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamModifyRoleModuleBindingsRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/roles": {
      "get": {
        "operationId": "DescribeRoles",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDescribeRolesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "head.user_id",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "search_word",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "delete": {
        "summary": "注意：删除的时候注意需要递归删除，对应的role id list 的role包含的user的role_id 要修改为空，\n并且Role对应的Feature和Action表数据也要清理掉",
        "operationId": "DeleteRoles",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDeleteRolesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamDeleteRolesRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "post": {
        "operationId": "CreateRole",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamCreateRoleResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamCreateRoleRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "patch": {
        "operationId": "ModifyRole",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamModifyRoleResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamModifyRoleRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/roles/{role_id}": {
      "get": {
        "operationId": "GetRole",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamGetRoleResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "head.user_id",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/users": {
      "get": {
        "operationId": "DescribeUsers",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDescribeUsersResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "head.user_id",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "search_word",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "delete": {
        "operationId": "DeleteUsers",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamDeleteUsersResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamDeleteUsersRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "post": {
        "operationId": "CreateUser",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamCreateUserResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamCreateUserRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      },
      "patch": {
        "operationId": "ModifyUser",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamModifyUserResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/iamModifyUserRequest"
            }
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/users/user_id": {
      "get": {
        "operationId": "GetUser",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamGetUserResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "head.user_id",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    },
    "/v1.1/version:iam": {
      "get": {
        "operationId": "GetVersion",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/iamString"
            }
          }
        },
        "parameters": [
          {
            "name": "value",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          }
        ],
        "tags": [
          "IAMManager"
        ]
      }
    }
  },
  "definitions": {
    "iamAction": {
      "type": "object",
      "properties": {
        "action_id": {
          "type": "string"
        },
        "action_name": {
          "type": "string"
        },
        "method": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "feature_id": {
          "type": "string"
        },
        "feature_name": {
          "type": "string"
        },
        "module_id": {
          "type": "string"
        },
        "module_name": {
          "type": "string"
        }
      }
    },
    "iamBool": {
      "type": "object",
      "properties": {
        "value": {
          "type": "boolean",
          "format": "boolean"
        }
      }
    },
    "iamCanDoActionResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "ok": {
          "type": "boolean",
          "format": "boolean"
        }
      }
    },
    "iamCreateGroupRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "value": {
          "$ref": "#/definitions/iamGroup"
        }
      }
    },
    "iamCreateGroupResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "group_id": {
          "type": "string"
        }
      }
    },
    "iamCreateRoleRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "value": {
          "$ref": "#/definitions/iamRole"
        }
      }
    },
    "iamCreateRoleResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "role_id": {
          "type": "string"
        }
      }
    },
    "iamCreateUserRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "value": {
          "$ref": "#/definitions/iamUser"
        }
      }
    },
    "iamCreateUserResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "user_id": {
          "type": "string"
        }
      }
    },
    "iamDeleteGroupsRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "group_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "iamDeleteGroupsResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "group_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "iamDeleteRolesRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "role_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "iamDeleteRolesResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "role_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "iamDeleteUsersRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "user_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "iamDeleteUsersResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "user_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "iamDescribeActionsResponse": {
      "type": "object",
      "properties": {
        "action_set": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/iamAction"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "iamDescribeGroupsResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "group_set": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/iamGroup"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "iamDescribeRolesResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "role_set": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/iamRole"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "iamDescribeUsersResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "user_set": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/iamUser"
          }
        },
        "total_count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "iamGetGroupResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "value": {
          "$ref": "#/definitions/iamGroup"
        }
      }
    },
    "iamGetRoleResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "value": {
          "$ref": "#/definitions/iamRole"
        }
      }
    },
    "iamGetUserResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "value": {
          "$ref": "#/definitions/iamUser"
        }
      }
    },
    "iamGroup": {
      "type": "object",
      "properties": {
        "group_id": {
          "type": "string"
        },
        "group_name": {
          "type": "string"
        },
        "parent_group_id": {
          "type": "string"
        },
        "group_path": {
          "type": "string"
        },
        "level": {
          "type": "integer",
          "format": "int32"
        },
        "seq_order": {
          "type": "integer",
          "format": "int32"
        },
        "owner": {
          "type": "string"
        },
        "owner_path": {
          "type": "string"
        },
        "create_time": {
          "type": "string",
          "format": "date-time"
        },
        "update_time": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "iamModifyGroupRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "value": {
          "$ref": "#/definitions/iamGroup"
        }
      }
    },
    "iamModifyGroupResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "group_id": {
          "type": "string"
        }
      }
    },
    "iamModifyRoleModuleBindingsRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "binding": {
          "$ref": "#/definitions/iamRoleModuleBinding"
        }
      }
    },
    "iamModifyRoleModuleBindingsResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        }
      }
    },
    "iamModifyRoleRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "value": {
          "$ref": "#/definitions/iamRole"
        }
      }
    },
    "iamModifyRoleResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "role_id": {
          "type": "string"
        }
      }
    },
    "iamModifyUserRequest": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamRequestHeader"
        },
        "value": {
          "$ref": "#/definitions/iamUser"
        }
      }
    },
    "iamModifyUserResponse": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/iamResponseHeader"
        },
        "user_id": {
          "type": "string"
        }
      }
    },
    "iamRequestHeader": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string"
        }
      }
    },
    "iamResponseHeader": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string"
        },
        "owner_path": {
          "type": "string"
        },
        "access_path": {
          "type": "string"
        }
      }
    },
    "iamRole": {
      "type": "object",
      "properties": {
        "role_id": {
          "type": "string"
        },
        "role_name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "portal": {
          "type": "string"
        },
        "owner": {
          "type": "string"
        },
        "owner_path": {
          "type": "string"
        },
        "create_time": {
          "type": "string",
          "format": "date-time"
        },
        "update_time": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "iamRoleModuleBinding": {
      "type": "object",
      "properties": {
        "binding_id": {
          "type": "string"
        },
        "role_id": {
          "type": "string"
        },
        "module_id": {
          "type": "string"
        },
        "data_level": {
          "type": "string"
        },
        "enabled_actions": {
          "type": "string"
        },
        "owner": {
          "type": "string"
        },
        "create_time": {
          "type": "string",
          "format": "date-time"
        },
        "update_time": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "iamString": {
      "type": "object",
      "properties": {
        "value": {
          "type": "string"
        }
      }
    },
    "iamUser": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string"
        },
        "group_id": {
          "type": "string"
        },
        "role_id": {
          "type": "string"
        },
        "user_name": {
          "type": "string"
        },
        "position": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "phone_number": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "old_password": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "owner": {
          "type": "string"
        },
        "owner_path": {
          "type": "string"
        },
        "create_time": {
          "type": "string",
          "format": "date-time"
        },
        "status_time": {
          "type": "string",
          "format": "date-time"
        },
        "update_time": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "iamUserPassword": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    }
  }
}
